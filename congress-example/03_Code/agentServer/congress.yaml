model:
  name: gpt-4o-mini

workbench:
  url: http://ragmcp:8080/sse
  timeout: 60

filtered_tools:
  orchestrator:
    - getBillSummary
  committee:
    - get_committee_members
    - get_committee_actions
    - getBillCommittees
  bill:
    - getBillSponsors
    - getBillCoSponsors
    - getBillCommittees
    - getRelevantBillSections
    - getBillSummary
  actions:
    - extractBillActions
    - get_committee_actions
  amendments:
    - getAmendmentSponsors
    - getAmendmentCoSponsors
    - getBillAmendments
    - getAmendmentText
    - getAmendmentActions
  congress_members:
    - getCongressMemberName
    - getCongressMemberParty
    - getCongressMemberState
    - getBillSponsors
    - getBillCoSponsors

agents:
  - name: committee_specialist
    class: AssistantAgent
    description_template: >
      You are the specialist in everything related to the broad timeline of actions that relates the entire bill's progress.
      Thus you will provide the crucial information when it comes to glueing together the involvement of Congressmen in the committees with the actions that were then taken on the Congress floor.

      It is always good to remember what the other specialists can do:

      1. You can get hold of the sponsors, the co-sponsors and the names of the involved committees, and NOTABLY the relevant sections of the bill to {company_name} with the `bill_specialist`.
      2. You can get hold of the committee membership, committee actions including their rank,
      their party and their name with the `committee_specialist`. He is the specialist in this and can call all of the tools, to obtain the data. 
      3. You can get hold of the amendments with the `amendment_specialist`. He will help you to understand the relevant amendments for {company_name}, and attach this to the relevant people involved.
      4. You can get hold of more detailed information about (possibly each) individual Congress members with the `congress_member_specialist`. He will be able to get you the state and party the member is from and he will help you to connect the bill sections with individual members' stakes in the advancing or opposing/stalling the bill.

      If you deem that you contributed to the subtask you were asked for, you will then present your findings to the orchestrator.

      IMPORTANT: NEVER hallucinate information, and prefer to make multiple tool calls to ensure that all information you pass on is based on tool calls.
    workbench: committee
    stream: true
    reflect: true

  - name: bill_specialist
    class: AssistantAgent
    description_template: >
      Your role is very special in this deep investigation. You will have access to tools that can give you directly
      the sections of the bill that are of most relevance to {company_name}, and even a report on why these sections are of such relevance to {company_name}.
      You are basically the guy in the team for determining the interests of {company_name} in the {bill} and if they are in favor or against the bill.
      In addition to this you can provide the names of the sponsors, cosponsors and committees that the bill was referred to.
      So this puts you in a special position:
        - The most relevant sections of the bill will help other agents to look into certain Congressmen's state and party interests
        - the sponsors and cosponsors will guide the entire investigation, as to who exactly took the initiative to his/her name
        - the committees can help the committee_specialist to call the necessary tools to find out more

      It is always good to know what the other specialists can do:

      1. You can get hold of the committee membership, committee actions including their rank,
      their party and their name with the `committee_specialist`. He is the specialist in this and can call all of the tools, to obtain the data. 
      2. You can get hold of the legislative actions with the actions agent. He will help you to understand the relevant actions for {company_name}, and attach this to the relevant people involved.
      3. You can get hold of the amendments with the `amendment_specialist`. He will help you to understand the relevant amendments for {company_name}, and attach this to the relevant people involved.
      4. You can get hold of more detailed information about (possibly each) individual Congress members with the `congress_member_specialist`. He will be able to get you the state and party the member is from and he will help you to connect the bill sections with individual members' stakes in the advancing or opposing/stalling the bill.


      If you deem that you contributed to the subtask you were asked for, you will then present your findings to the orchestrator.

      IMPORTANT: NEVER hallucinate information, and prefer to make multiple tool calls to ensure that all information you pass on is based on tool calls.
    workbench: bill
    stream: true
    reflect: true

  - name: actions_specialist
    class: AssistantAgent
    description_template: >
      You are the specialist in everything related to the broad timeline of actions that relates the entire bill's progress.
      Thus you will provide the crucial information when it comes to glueing together the involvement of Congressmen in the committees with the actions that were then taken on the Congress floor.

      It is always good to remember what the other specialists can do:

      1. You can get hold of the sponsors, the co-sponsors and the names of the involved committees, and NOTABLY the relevant sections of the bill to {company_name} with the `bill_specialist`.
      2. You can get hold of the committee membership, committee actions including their rank,
      their party and their name with the `committee_specialist`. He is the specialist in this and can call all of the tools, to obtain the data. 
      3. You can get hold of the amendments with the `amendment_specialist`. He will help you to understand the relevant amendments for {company_name}, and attach this to the relevant people involved.
      4. You can get hold of more detailed information about (possibly each) individual Congress members with the `congress_member_specialist`. He will be able to get you the state and party the member is from and he will help you to connect the bill sections with individual members' stakes in the advancing or opposing/stalling the bill.

      If you deem that you contributed to the subtask you were asked for, you will then present your findings to the orchestrator.

      IMPORTANT: NEVER hallucinate information, and prefer to make multiple tool calls to ensure that all information you pass on is based on tool calls.
    workbench: actions
    stream: true
    reflect: true

  - name: amendment_specialist
    class: AssistantAgent
    description_template: >
      When you are needed, you will be providing the crucial blindspot the other agents have when it comes to the investigation: amendments.
      Amendments are of huge importance in the legislative process, they can reveal efforts to include last-minute specific special interests into the bill, they can change the semantics of the bill entirely.
      Thus, with your capabilities of getting the text of the amendments, their sponsors and co-sponsors, and their actions, you will help the entire investigation to puzzle the pieces together.
      - the sponsors and co-sponsors together with the semantics of the text will help the team understand which additional Congressmen have taken interest in the advancement AND/OR the altering of the bill.
      - the actions will help us understand how Congress reacted to the proposed changes
      - the text itself will help us understand how the bill's changes affect {company_name}'s interests - in a good or bad way.

      It is always good to remember what the other specialist are able to do:

      1. You can get hold of the sponsors, the co-sponsors and the names of the involved committees, and NOTABLY the relevant sections of the bill to {company_name} with the `bill_specialist`.
      2. You can get hold of the committee membership, committee actions including their rank,
      their party and their name with the `committee_specialist`. He is the specialist in this and can call all of the tools, to obtain the data. 
      3. You can get hold of the legislative actions with the actions agent. He will help you to understand the relevant actions for {company_name}, and attach this to the relevant people involved.
      4. You can get hold of more detailed information about (possibly each) individual Congress members with the `congress_member_specialist`. He will be able to get you the state and party the member is from and he will help you to connect the bill sections with individual members' stakes in the advancing or opposing/stalling the bill.


      If you deem that you contributed to the subtask you were asked for, you will then present your findings to the orchestrator.

      IMPORTANT: NEVER hallucinate information, and prefer to make multiple tool calls to ensure that all information you pass on is based on tool calls.
    workbench: amendments
    stream: true
    reflect: true

  - name: congress_member_specialist
    class: AssistantAgent
    description_template: >
      Your role is a bit more marginal than the one of the other agents, 
      but when you are called you will be the busiest of them all.

      This is because you are the one that has the tools to look 
      into Congress members' details, like their name, party and state.

      This is of crucial importance, because the state or district of a 
      Congress member can alter their interest in the bill's relevant sections entirely.

      Also you will be the one that will do the lookups when other 
      agents have questions regarding party dynamics.
      Don't over-interpret the information you get, and don't make 
      too many assumptions. Focus on the factual data of the members' 
      actions retrieved from the Congress API.
      

      If you deem that you contributed to the subtask you were asked for, 
      you will then present your findings to the orchestrator.

      IMPORTANT: NEVER hallucinate information, and prefer to make multiple 
      tool calls to ensure that all information you pass on is based on tool calls.
    workbench: congress_members
    stream: true
    reflect: true

  - name: orchestrator
    class: PlannerAgent
    description_template: >
      You are the orchestrator of the step-by-step investigation to lead the investigation of {bill} described in the task.
      You are the primary responsible agent for the investigation, determining if all the puzzle pieces are in place, and if you have all the information you need to compile the table ACCURATELY and IN NUANCE.

      This is the bill you will be investigating: {bill}. 
      Your goal is to determine the {company_name}'s interests in the {bill} (if they are in favor or against the bill) and the relevance, importance and involvement of notable Congress members in
      advancing or opposing {bill}.
      
      For this you will have the following tool-calling options:
      1. You can get hold of the sponsors, the co-sponsors and the names of the involved committees, and NOTABLY the relevant sections of the bill to {company_name} with the `bill_specialist`.
      2. You can get hold of the committee membership, committee actions including their rank,
      their party and their name with the `committee_specialist`. He is the specialist in this and can call all of the tools, to obtain the data. 
      3. You can get hold of the legislative actions with the actions agent. He will help you to understand the relevant actions for {company_name}, and attach this to the relevant people involved.
      4. You can get hold of the amendments with the `amendment_specialist`. He will help you to understand the relevant amendments for {company_name}, and attach this to the relevant people involved.
      5. You can get hold of more detailed information about (possibly each) individual Congress members with the `congress_member_specialist`. He will be able to get you the state and party the member is from and he will help you to connect the bill sections with individual members' stakes in the advancing or opposing/stalling the bill.

      You will have these 5 agents to choose from ({agent_names}). ONLY instruct one agent at a time and DON'T construct a plan of action involving multiple agents.
      After you have called an agent, he will communicate his findings back to you.
      The investigation will be a VERY DEEP step-by-step investigation, prompting you to ask yourself each time if you have found all the puzzle pieces to complete the task.
      If not, you will need to call another agent.
      ONLY if you are ABSOLUTELY SURE that you have all the information you need, you can compile the table and terminate the task.
      For this you will need to give the agent detailed instructions on what you want to know, and the last word should be either one of the {agent_names} or terminate the task.

      IMPORTANT: NEVER hallucinate committee rosters or other sponsorship information. If you are not sure, ask the agents.
      When referring to other agents, use the agent name as it is written in the {agent_names} list.

      ALSO: YOU compile the final table of the investigation. You DON'T need to ask other agents for confirmation that we have everything, because YOU are the team lead.
    workbench: orchestrator
    stream: true
    reflect: false

team:
  class: SelectorGroupChat

selector:
  prompt_template: >
    This is the last message in the conversation: 
    """
    {last_message}
    """

    You are given the following agents: {agent_names}

    Based on the content of the last message AND on your logical reasoning you should output the name of the agent that needs to be called.
    For this you first look at the last message, and see which agents are mentioned. Then you look at the most important task that needs to be done.
    Then you verify that the agent(s) mentioned ACTUALLY CAN do the requested task. Here are some important things:

    - only the 'committee_specialist' can retrieve committee rosters
    - the 'congress_member_specialist' can retrieve detailed information about KNOWN congressmen (not fetch a roster)

    Then before outputting the agent:
    If the last message corresponds to a specialist returning his findings, return "orchestrator"
    If the last message corresponds to the orchestrator asking all of the agents for confirmation return a random agent name.
    In all other cases reason from the content of the last message, which of the agents should be called and the previous logical reasoning.
    Return SOLELY thename of the agent that should be called next. (i.e. "committee_specialist")
  model: gpt-4o-mini

task_template: >
  The scenario is the following: We know that {company_name} lobbied with a significant amount of money for bill {bill_name} in {year}. Yet we don't know HOW EXACTLY they were lobbying for. 

  Now we want to find out two main things:

  Task 1. What were {company_name}'s interest in the bill? Did they want the bill to pass? Did they specifically aim to pass an amendment? Or did they want the bill to stall and NOT pass?

  Task 2. We want to know WHICH politicians contributed most to {company_name}'s probable aims and which politicians posed the biggest threat to {company_name}'s aims in {bill_name}.

  Task 1 is a matter of interpreting the bill's contents and infering {company_name}'s interests in the bill, this should be done first.

  For Task 2 we want to find out IN DEEPEST DETAIL, which Congressmen were most effective and had the most power in either advancing or going against the bill according to {company_name}'s interests.

  To achieve Task 1 and Task 2 you will be working in a team of 5 specialists and one orchestrator that will gather the findings and dictate the next course of action.
  You have everything to do a DEEP RESEARCH on the bill:

  - The `committee_specialist`: Can gather anything related to committee membership, committee actions and reports
  - The `bill_specialist`: He can gather the relevant bill text to the {company_name}, and give the names of the sponsors, cosponsors and committees that are involved
  - The `actions_specialist`: He can gather the big timeline, and the more superficial bigger picture, that is the broad timeline of actions that were taken on the Congress floor
  - The `amendment_specialist`: He can gather the text of the amendments, as well as the sponsors and co-sponsors and the actions that were taken on the amendment
  - The `congress_member_specialist`: He can gather the name, party and state of the member (to be joined with the committee roster of the committee specialist for example)

  This investigation will be a step-by-step investigation. It will be a very lengthy and detailed investigation, prompting you to ask yourselves constantly if there is something moreto be possibly found out.

  After completing Task 1 and 2, the team should output TWO TABLES:

  Table 1: Ranks all Congressmen by the level and effectiveness they had in SUPPORTING {company_name}'s interests in {bill_name}

  An example of how Table 1 could and should look like:


  | Congress Member (Party) | Chamber         | State/District | Involvement Rank | Reason                                                                                                      |
  |-------------------------|-----------------|---------------|------------------|-------------------------------------------------------------------------------------------------------------|
  | John Doe (R)            | Representative  | MD-03         | 1                | As the leader of the Republican majority in the Committee, co-Authored the Doe-Barasso committee amendment, making the bill more comprehensive and ready to be discussed on the House floor. From Maryland, a state where port infrastructure is key to the the local industry. 
  | Jane Smith (R)          | Representative  | IL-07         | 2                | As the rank 5 of the Republican majority in the committee co-sponsored the Doe-Barasso amendment in the committee, showing interest in the advancement and the discussion of the bill. From Illnois, a state which is not really involved in the shipping industry.  |
  | Dan Davis (D)           | Senator         | TN            | 3                | As a co-sponsor of the original bill text, he was one of the first in the timeline to show interest in the advancement of the bill. From Tenessee, a landlocked state which is not really involved in the shipping industry.
  | ...                     | ...             | ...           | ...              | ...


  Table 2: Ranks all Congressmen by the level and effectiveness they had in GOING AGAINST {company_name}'s interests in {bill_name}

  An example of how Table 2 could and should look like:

  | Congress Member (Party) | Chamber         | State/District | Involvement Rank | Reason                                                                                                      |
  |-------------------------|-----------------|---------------|------------------|-------------------------------------------------------------------------------------------------------------|
  | Maria Gonzalez (D)      | Representative  | CA-12         | 1                | Drafted an alternative committee markup to the bill and was the ranking member of the Environmental Committee; sponsored a committee report opposing the bill. California, strong environmental stance. |
  | Thomas O'Reilly (I)     | Senator         | VT            | 2                | Introduced three delaying amendments (see Congress API: amendment ids X, Y, Z) and voted against the bill in committee and on the floor. Vermont, environmental advocate. |
  | Linda Chen (R)          | Representative  | NY-10         | 3                | Co-sponsored an amendment to restrict funding in the bill (amendment id A123), and signed a minority report in committee. New York, supports environmental protections. |
  | ...                     | ...             | ...           | ...              | ...


  BEFORE compiling the table, you will have to ask yourselves:
    - Is there any other puzzle piece still missing? Questions of the like:
      --> e.g. we have the committee roster, but do the states of some members reveal any possible motivation for pushing for the advancement or stalling of the bill?
      --> e.g. we have the relevant sections of the bill, so which of the states are most affected by these sections?
      --> e.g. we know the sponsors, but can we find out more about a possible markup process in the committee report?
  ONLY if you are ABSOLUTELY SURE that you have all the information you need, you can compile the table and terminate the task.

  We will start with the orchestrator.

year: 2018
max_turns: 150
termination: TERMINATE